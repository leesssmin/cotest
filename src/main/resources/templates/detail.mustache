<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{{post.title}}</title>
    <link rel="stylesheet" href="/css/detail.css">
</head>
<body>
<div class="container">
    <header>
        <h1>{{post.title}}</h1>
        <a href="/posts" class="button">목록</a>
        <a href="/posts/{{post.id}}/edit" class="button">수정</a>
    </header>

    <div class="post-card">
        <p class="author">작성자: {{post.author}}</p>
        <p class="snippet">{{post.content}}</p>

        <form action="/posts/{{post.id}}/delete" method="post" style="margin-top: 10px;">
            <button type="submit" class="button delete">삭제</button>
        </form>
    </div>

    <!-- 리뷰 섹션 -->
    <div class="review-section">
        <h2 class="review-title">💬 댓글 ({{reviews.size}})</h2>

        <!-- 리뷰 작성 폼 -->
        <div class="review-form-card">
            <form action="/posts/{{post.id}}/reviews" method="post">
                <textarea name="content" placeholder="댓글을 작성해주세요..." rows="3" required></textarea>
                <button type="submit" class="button review-submit">작성</button>
            </form>
        </div>

        <!-- 리뷰 목록 -->
        <div class="review-list">
            {{#reviews}}
                <div class="review-card">
                    <div class="review-header">
                        <span class="review-author">{{author}}</span>
                        <span class="review-date">{{createdAt}}</span>
                    </div>
                    <p class="review-content">{{content}}</p>
                    <form action="/posts/reviews/{{id}}/delete" method="post" class="review-delete-form">
                        <input type="hidden" name="postId" value="{{post.id}}">
                        <button type="submit" class="review-delete-btn">삭제</button>
                    </form>
                </div>
            {{/reviews}}

            {{^reviews}}
                <div class="empty-review">
                    <p>첫 번째 댓글을 작성해보세요! 🎉</p>
                </div>
            {{/reviews}}
        </div>
    </div>
</div>
</body>
</html>